<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="####2017/08/03 #####1.借用原型方法 123456789101112131415161718192021222324252627282930313233343536373839404142function queryAvg() &amp;amp;#123;    //-&amp;gt;执行内置的SL">
<meta property="og:type" content="article">
<meta property="og:title" content="js学学习笔记-01">
<meta property="og:url" content="http://yoursite.com/2017/12/03/js学学习笔记-01/index.html">
<meta property="og:site_name" content="好带马的个人博客">
<meta property="og:description" content="####2017/08/03 #####1.借用原型方法 123456789101112131415161718192021222324252627282930313233343536373839404142function queryAvg() &amp;amp;#123;    //-&amp;gt;执行内置的SLICE方法,让THIS变为ARG,可以实现把类数组转化为数组    //=&amp;gt;执行内置的SL">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2017/12/03/js学学习笔记-01/1501732818157.png">
<meta property="og:updated_time" content="2017-12-03T09:30:50.531Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="js学学习笔记-01">
<meta name="twitter:description" content="####2017/08/03 #####1.借用原型方法 123456789101112131415161718192021222324252627282930313233343536373839404142function queryAvg() &amp;amp;#123;    //-&amp;gt;执行内置的SLICE方法,让THIS变为ARG,可以实现把类数组转化为数组    //=&amp;gt;执行内置的SL">
<meta name="twitter:image" content="http://yoursite.com/2017/12/03/js学学习笔记-01/1501732818157.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/12/03/js学学习笔记-01/"/>





  <title>js学学习笔记-01 | 好带马的个人博客</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?7f7fc0818bf01cde8c4db632bad33df3";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">好带马的个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/03/js学学习笔记-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="daima Hao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="好带马的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">js学学习笔记-01</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-03T17:03:39+08:00">
                2017-12-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>####2017/08/03</p>
<p>#####<strong>1.借用原型方法</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">queryAvg</span>(<span class="params"></span>) &amp;#123;</span></span><br><span class="line"><span class="function">    //-&gt;执行内置的<span class="title">SLICE</span>方法,让<span class="title">THIS</span>变为<span class="title">ARG</span>,可以实现把类数组转化为数组</span></span><br><span class="line"><span class="function">    //=&gt;执行内置的<span class="title">SLICE</span></span></span><br><span class="line"><span class="function">    // <span class="title">Array</span>.<span class="title">prototype</span>.<span class="title">slice</span>(<span class="params"></span>)</span></span><br><span class="line">    // [].__proto__.slice()</span><br><span class="line">    <span class="comment">// [].slice()</span></span><br><span class="line">    <span class="keyword">var</span> ary = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">    </span><br><span class="line">    ary.sort(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) &amp;#123;</span></span><br><span class="line"><span class="function">        <span class="title">return</span> <span class="title">a</span> - <span class="title">b</span>;</span></span><br><span class="line"><span class="function">    &amp;#125;).<span class="title">shift</span>(<span class="params"></span>);</span></span><br><span class="line"><span class="function">    <span class="title">ary</span>.<span class="title">length</span>--;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">return</span> (<span class="params">eval(ary.join(<span class="string">'+'</span></span>)) / <span class="title">ary</span>.<span class="title">length</span>).<span class="title">toFixed</span>(<span class="params"><span class="number">2</span></span>);</span></span><br><span class="line"><span class="function">&amp;#125;</span></span><br><span class="line"><span class="function"><span class="title">var</span> <span class="title">res</span> = <span class="title">queryAvg</span>(<span class="params"><span class="number">9.8</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">9.2</span>, <span class="number">9.5</span>, <span class="number">8.6</span>, <span class="number">7</span>, <span class="number">7.8</span>, <span class="number">9</span>, <span class="number">8.8</span></span>);</span></span><br><span class="line"><span class="function"><span class="title">console</span>.<span class="title">log</span>(<span class="params">res</span>);</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">//-&gt;重写<span class="title">SLICE</span>,实现数组克隆即可</span></span><br><span class="line"><span class="function"><span class="title">Array</span>.<span class="title">prototype</span>.<span class="title">slice</span> = <span class="title">function</span> <span class="title">slice</span>(<span class="params"></span>) &amp;#123;</span></span><br><span class="line"><span class="function">    //-&gt;<span class="title">this</span>:<span class="title">ary</span></span></span><br><span class="line">    var aryNew = [];</span><br><span class="line">    for (var i = 0; i &lt; this.length; i++) &amp;#123;</span><br><span class="line">        aryNew.push(<span class="keyword">this</span>[i]);</span><br><span class="line">    &amp;#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//-&gt;arguments克隆成为数组</span></span><br><span class="line">    <span class="keyword">var</span> ary = [];</span><br><span class="line">    for (var i = 0; i &lt; arguments.length; i++) &amp;#123;</span><br><span class="line">        ary.push(<span class="built_in">arguments</span>[i]);</span><br><span class="line">    &amp;#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//=&gt;通过对比，我们发现，我们实现的把ARG变为数组的代码和内置的SLICE克隆代码很相近(ARG的结构和数组一样)，唯一的区别是，内置SLICE用的是THIS，我们用的是ARG</span></span><br><span class="line">    <span class="comment">//=&gt;&gt; 如果我们能把内置的SLICE方法执行，并且让方法中的THIS变为我们的ARG，那么这样不就相当于把我们的ARG克隆成为一个新数组，这样不需要我们自己的辛辛苦苦写循环了</span></span><br><span class="line">    <span class="comment">//=&gt;&gt;&gt; 我们的这种思想是：借用数组原型上的方法，方法执行的时候让THIS变为类数组，实现将类数组转换为数组</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> aryNew;</span><br><span class="line">&amp;#125;;</span><br><span class="line"><span class="keyword">var</span> ary = [<span class="number">12</span>, <span class="number">23</span>, <span class="number">34</span>];</span><br><span class="line"><span class="keyword">var</span> newAry = ary.slice();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在JS 中元素集合（HTMLCollertion的实例）以及节点集合（NodeList实例）也是类数组。</p>
<p> 这些类数组也可以借用数组原型的方法，实现一些相关的操作，例如：借用slice 把类数组转换成数组。</p>
<p>  在IE低版本浏览器中运行，我们发现ARG这个类数组是可以借用数组的方法正常操作的，但是元素集合和节点集合的类数组，无法借用数组原型上的方法，提示：Array.prototype.slice:’this’不是JavaScript对象的错误，IE6-8元素集合和节点集合的类数组被当作静态类.</p>
<p>   所以在IE低版本中，我们把节点或者元素集合转换为数组的时候，就不能使用这种方法了，需要写循环。</p>
<p><strong>综上所述</strong>： 如果我们想实现一个方法，可以把类数组转换为数组，我们需要考虑的事情：</p>
<ul>
<li>1.兼容（）.slice.call([类数组])这种模式的，我们使用这种模式，不能兼容浏览器，我们使用循环一步步处理。</li>
<li>2.如果验证</li>
</ul>
</blockquote>
<p>#####2.浏览器异常捕获 ‘try  catch  finally’</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">try&amp;#123;</span><br><span class="line">	<span class="comment">//-&gt;js代码</span></span><br><span class="line">&amp;#125;catch（e）｛</span><br><span class="line">	<span class="comment">//-&gt;try中的JS 代码执行，如果出现错误，会进入到catch中（没出错不进入这里）</span></span><br><span class="line">	<span class="comment">// -&gt;e（error）是一个形参（名字可以随便起，但是必须写形参，不写语法报错），e.message：存储的是当前JS 代码执行的报错信息</span></span><br><span class="line">｝<span class="keyword">finally</span>｛</span><br><span class="line"></span><br><span class="line">	<span class="comment">//-&gt;不管JS执行是否报错，最后都会执行finally中的内容（不常用）。</span></span><br><span class="line">｝</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用 try  catch 的作用</p>
<ul>
<li><p>可以捕获到错误信息的同时，防止浏览器抛出异常信息，这样即使当前代码报错了，也不会影响下面的执行。</p>
<h2 id="可以监听到-报错，我们可以利用这个机制，做一些兼容处理：把需要处理的代码放到try中，如果不兼容报错了，我们在catch中处理兼容即可。"><a href="#可以监听到-报错，我们可以利用这个机制，做一些兼容处理：把需要处理的代码放到try中，如果不兼容报错了，我们在catch中处理兼容即可。" class="headerlink" title="- 可以监听到 报错，我们可以利用这个机制，做一些兼容处理：把需要处理的代码放到try中，如果不兼容报错了，我们在catch中处理兼容即可。"></a>- 可以监听到 报错，我们可以利用这个机制，做一些兼容处理：把需要处理的代码放到try中，如果不兼容报错了，我们在catch中处理兼容即可。</h2><p><strong>项目中 经常使用 try｛项目的所有JS代码｝catch（e）｛//收集报错信息：统计到服务器上｝以此来收集错误信息，而且还不会在浏览器控制台抛出异常错误。</strong><br><strong>还有的是每个开发者把自己的代码包裹起来，或者经常出现问题的代码包裹起来，最后的目的都是收集错误信息。</strong><br>// - &gt; trow 抛出自定义错误。<br>使用 try catch捕获异常信息的时候，后面代码还可以继续执行，但是项目中难免会出现这样的需求：我们上面的代码如果不能正常的执行，下面的代码也不让它执行了，这时候我们就需要手动抛出错误来阻止下面的代码执行</p>
<p>Error这个类划分为几个小类：</p>
<ul>
<li>ReferenceError : 引用错误</li>
<li>TypeError：类型错误</li>
<li>RangeError：范围错误</li>
<li>SyntaxErrot：语法错误<br>…</li>
</ul>
</li>
</ul>
</blockquote>
<p>#####<strong>JSON</strong></p>
<blockquote>
<p>JSON不是一个数据类型，它只是某种特殊的数据格式：把属性名用双引号包起来 格式，就是JSON格式的数据（JSON对象/JSON字符串），JSON格式没什么特殊的，操作起来和对象和字符串一样。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var obj=&amp;#123;name: '珠峰'，age：8&amp;#125;;</span><br><span class="line">var jsonObj=｛"name"='珠峰'，"age":8&amp;#125; //-&gt;JSON 对象；</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">"&amp;#123;"</span>name<span class="string">"：&amp;#125;"</span></span><br><span class="line"><span class="keyword">var</span> jsonObj=<span class="string">'｛"name"='</span>珠峰<span class="string">'，"age":8&amp;#125;'</span> <span class="comment">//-&gt;JSON 字符串；</span></span><br></pre></td></tr></table></figure></p>
<p>在前后端数据交互中，服务器端返回给客户端的数据一般都是JSON格式的，也就是JSON的作用：承载服务器和客户端的数据交互。<br><img src="./1501732818157.png" alt="Alt text"></p>
</blockquote>
<p>JSON的方法：</p>
<blockquote>
<p><strong>1.JSON.parse</strong>全称’window.JSON.parse’在全局对象中存在一个JSON对象，这个对象中有一个parse方法，把JSON格式的字符串转换为JSON格式的对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">'[&amp;#123;"id":1,"name":"xxx"&amp;#125;,&amp;#123;"id":2,"name":"yyy"&amp;#125;]'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> jsonData=<span class="built_in">JSON</span>.parse(str);</span><br><span class="line"><span class="built_in">console</span>.log(jsonData);<span class="comment">//-&gt;JSON对象</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// -&gt; 意义：服务器端返回客户端的一般都是JSON 字符串，我们操作里面属性和属性值的时候不好操作，此时我们需要先把这个字符串转换为对象才可以。</span></span><br></pre></td></tr></table></figure></p>
<p><strong>2.JSON.stringify</strong></p>
<p>把JSON对象转换为JSON字符串</p>
<p>  -&gt; 意义：有些时候，客户端不仅仅向服务器发请求，还会给服务器传递点内容（例如：注册的时候，需要客户端把用户输入的内容传递给服务器），客户端传递给服务器的一般都是JSON格式的字符串，此时我们就需要是有stringify这个方法把得到的结果变为字符串，再传递给服服务器。</p>
<p>在IE6和IE7中，window下没有这个对象，也就是不能使用‘JSON.parse’和’JSON.stringify’ 这两个方法了。</p>
<p> ‘JSON.parse’被’eval’取代了<br> ‘JSON.stringify’ 没有能取代的，所以需要自己编写复杂的程序实现。（类似数组的深度克隆）</p>
<p>  eval（’(‘+str+’)’）; // -&gt; 手动给需要解析的字符串外层包裹一个小括号，防止解析出错；对于’｛…｝’这种格式的字符串，如果外层不多加一层小括号，解析出来，属于语法不符合。</p>
<p>综上我们现在有一个需求：编写一个方法，能够实现把JSON字符串转换为JSON对象</p>
<ul>
<li>兼容：’JSON.parse’  不兼容’eval’</li>
<li>如果window中存在JSON这个属性，属于兼容，反之不兼容。</li>
</ul>
</blockquote>
<p>#####AJAX</p>
<blockquote>
<p>async javascript and xml 我们可以通过AJAX向服务器发送请求，并且获取到服务器返回的内容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//-&gt; 创建一个AJAX对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xhr=<span class="keyword">new</span> XMLHttpRequest;</span><br><span class="line"></span><br><span class="line"><span class="comment">// -&gt;打开一个请求的URL地址</span></span><br><span class="line"></span><br><span class="line">xhr.open([请求方式]，[请求的URL地址])，[同步或者异步]</span><br><span class="line"></span><br><span class="line"><span class="comment">// -&gt;xhr.open('GET','xxx/xxx.json',false);</span></span><br><span class="line"></span><br><span class="line"><span class="literal">false</span> 代表的是同步编程：当从服务器端把数据获取到之后，才可以做到的事情</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//-&gt;监听AJAX的状态改变，接收服务器返回的结果</span></span><br><span class="line"></span><br><span class="line">xhr.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)&amp;#123;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">	<span class="title">if</span>(<span class="params">xhr.readyState===<span class="number">4</span> &amp;&amp; xhr.status===<span class="number">200</span></span>)&amp;#123;</span></span><br><span class="line"><span class="function">		//-&gt;从服务器获取数据成功，下面的操作就可以接收到服务器返回的结果</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">		<span class="title">xhr</span>.<span class="title">reponseText</span>;</span></span><br><span class="line"><span class="function">	&amp;#125;</span></span><br><span class="line"><span class="function">&amp;#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">// -&gt; 向服务器发送请求</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">xhr</span>.<span class="title">send</span>(<span class="params">null</span>);</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>#####sort</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">var</span> ary=[<span class="number">1</span>,<span class="number">23</span>,<span class="number">345</span>,<span class="number">435</span>,<span class="number">56</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">455</span>];</span><br><span class="line">ary.sort(<span class="function"><span class="keyword">function</span> (<span class="params">a,b</span>) &amp;#123;</span></span><br><span class="line"><span class="function">    // <span class="title">console</span>.<span class="title">log</span>(<span class="params">a, b</span>); //-&gt;  <span class="title">a</span>是当前项，<span class="title">b</span>是后一项</span></span><br><span class="line"><span class="function">    <span class="title">return</span> 1;//-&gt; <span class="title">return</span> 后面不一定非要写<span class="title">a</span>-<span class="title">b</span>，它的原理是如果返回的数是一个大于0的数</span></span><br><span class="line"><span class="function">    //当前项和后一项交换位置，如果是小于等于0的值，就不做任何处理</span></span><br><span class="line"><span class="function">&amp;#125;)</span></span><br></pre></td></tr></table></figure>
<p><font color="purple"> <strong>当使用sort对数组中多个对象进行排序时，假如不写函数，默认是把对象中的属性名按照首字母的ASCII码排序，如果第一个相同就比较第二个，而不会对对象进行排序</strong></font></p>
<blockquote>
<p> sort() 方法用于对数组的元素进行排序。<br>语法：arrayObject.sort(sortby)；参数sortby可选。规定排序顺序。必须是函数。<br>注：如果调用该方法时没有使用参数，将按字母顺序对数组中的元素进行排序，说得更精确点，&gt;是按照字符编码的顺序进行排序。要实现这一点，首先应把数组的元素都转换成字符串（如有必要），以便进行比较。</p>
<p>如果想按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字。比较函数应该具有两个参数 a 和 b，其返回值如下：<br>若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于 0 的值。<br>若 a 等于 b，则返回 0。<br>若 a 大于 b，则返回一个大于 0 的值。<br>如果想按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说&gt;明这两个值的相对顺序的数字。比较函数应该具有两个参数 a 和 b，其返回值如下：<br>若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于 0 的值。<br>若 a 等于 b，则返回 0。<br>若 a 大于 b，则返回一个大于 0 的值。</p>
<p>例1：我们将创建一个数组，并按字母顺序进行排序：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">6</span>)</span><br><span class="line">arr[<span class="number">0</span>] = <span class="string">"George"</span></span><br><span class="line">arr[<span class="number">1</span>] = <span class="string">"John"</span></span><br><span class="line">arr[<span class="number">2</span>] = <span class="string">"Thomas"</span></span><br><span class="line">arr[<span class="number">3</span>] = <span class="string">"James"</span></span><br><span class="line">arr[<span class="number">4</span>] = <span class="string">"Adrew"</span></span><br><span class="line">arr[<span class="number">5</span>] = <span class="string">"Martin"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.write(arr + <span class="string">"&lt;br /&gt;"</span>)</span><br><span class="line"><span class="built_in">document</span>.write(arr.sort())</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输出：<br>George,John,Thomas,James,Adrew,Martin<br>Adrew,George,James,John,Martin,Thomas</p>
<p>例2：我们将创建一个数组，并按字母顺序进行排序：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">6</span>)</span><br><span class="line">arr[<span class="number">0</span>] = <span class="string">"10"</span></span><br><span class="line">arr[<span class="number">1</span>] = <span class="string">"5"</span></span><br><span class="line">arr[<span class="number">2</span>] = <span class="string">"40"</span></span><br><span class="line">arr[<span class="number">3</span>] = <span class="string">"25"</span></span><br><span class="line">arr[<span class="number">4</span>] = <span class="string">"1000"</span></span><br><span class="line">arr[<span class="number">5</span>] = <span class="string">"1"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.write(arr + <span class="string">"&lt;br /&gt;"</span>)</span><br><span class="line"><span class="built_in">document</span>.write(arr.sort())</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输出：</p>
<p>10,5,40,25,1000,1<br>1,10,1000,25,40,5<br>请注意，上面的代码没有按照数值的大小对数字进行排序，要实现这一点，就必须使用一个排序函数：</p>
</blockquote>
<p><script type="text/javascript"><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortNumber</span>(<span class="params">a,b</span>)</span></span><br><span class="line"><span class="function">&amp;#123;</span></span><br><span class="line"><span class="function"><span class="title">return</span> <span class="title">a</span> - <span class="title">b</span></span></span><br><span class="line"><span class="function">&amp;#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">var</span> <span class="title">arr</span> = <span class="title">new</span> <span class="title">Array</span>(<span class="params"><span class="number">6</span></span>)</span></span><br><span class="line">arr[0] = "10"</span><br><span class="line">arr[<span class="number">1</span>] = <span class="string">"5"</span></span><br><span class="line">arr[<span class="number">2</span>] = <span class="string">"40"</span></span><br><span class="line">arr[<span class="number">3</span>] = <span class="string">"25"</span></span><br><span class="line">arr[<span class="number">4</span>] = <span class="string">"1000"</span></span><br><span class="line">arr[<span class="number">5</span>] = <span class="string">"1"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.write(arr + <span class="string">"&lt;br /&gt;"</span>)</span><br><span class="line"><span class="built_in">document</span>.write(arr.sort(sortNumber))</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>输出：</p>
<p>10,5,40,25,1000,1<br>1,5,10,25,40,1000<br>当然如果想根据数组对象中的某个属性值进行排序呢？</p>
<p>sort方法接收一个函数作为参数，这里嵌套一层函数用来接收对象属性名，其他部分代码与正常使用sort方法相同。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [</span><br><span class="line">    &amp;#123;name:'zopp',age:0&amp;#125;,</span><br><span class="line">    &amp;#123;name:'gpp',age:18&amp;#125;,</span><br><span class="line">    &amp;#123;name:'yjj',age:8&amp;#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params">property</span>)&amp;#123;</span></span><br><span class="line"><span class="function">    <span class="title">return</span> <span class="title">function</span>(<span class="params">a,b</span>)&amp;#123;</span></span><br><span class="line">        var value1 = a[property];</span><br><span class="line">        <span class="keyword">var</span> value2 = b[property];</span><br><span class="line">        <span class="keyword">return</span> value1 - value2;</span><br><span class="line">    &amp;#125;</span><br><span class="line">&amp;#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr.sort(compare(<span class="string">'age'</span>)))</span><br></pre></td></tr></table></figure></p>
<p>结果如图所示：</p>
<p>如何根据参数不同，来确定是升序排列，还是降序排序呢？<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">sortBy: <span class="function"><span class="keyword">function</span>(<span class="params">attr,rev</span>)&amp;#123;</span></span><br><span class="line"><span class="function">    //第二个参数没有传递 默认升序排列</span></span><br><span class="line"><span class="function">    <span class="title">if</span>(<span class="params">rev ==  undefined</span>)&amp;#123;</span></span><br><span class="line"><span class="function">        <span class="title">rev</span> = 1;</span></span><br><span class="line"><span class="function">    &amp;#125;<span class="title">else</span>&amp;#123;</span></span><br><span class="line"><span class="function">        <span class="title">rev</span> = (<span class="params">rev</span>) ? 1 : -1;</span></span><br><span class="line"><span class="function">    &amp;#125;</span></span><br><span class="line"><span class="function">    <span class="title">return</span> <span class="title">function</span>(<span class="params">a,b</span>)&amp;#123;</span></span><br><span class="line">        a = a[attr];</span><br><span class="line">        b = b[attr];</span><br><span class="line">        if(a &lt; b)&amp;#123;</span><br><span class="line">            <span class="keyword">return</span> rev * <span class="number">-1</span>;</span><br><span class="line">        &amp;#125;</span><br><span class="line">        if(a &gt; b)&amp;#123;</span><br><span class="line">            <span class="keyword">return</span> rev * <span class="number">1</span>;</span><br><span class="line">        &amp;#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &amp;#125;</span><br><span class="line">&amp;#125;</span><br></pre></td></tr></table></figure></p>
<p>使用方式：</p>
<p>newArray.sort(sortBy(‘number’,false))  </p>
<font>

</blockquote>
</script></p>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/12/03/js学学习笔记-02/" rel="prev" title="js学学习笔记-02">
                js学学习笔记-02 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/avatar.png"
                alt="daima Hao" />
            
              <p class="site-author-name" itemprop="name">daima Hao</p>
              <p class="site-description motion-element" itemprop="description">you can do everything with javascript!</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#可以监听到-报错，我们可以利用这个机制，做一些兼容处理：把需要处理的代码放到try中，如果不兼容报错了，我们在catch中处理兼容即可。"><span class="nav-number">1.</span> <span class="nav-text">- 可以监听到 报错，我们可以利用这个机制，做一些兼容处理：把需要处理的代码放到try中，如果不兼容报错了，我们在catch中处理兼容即可。</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">daima Hao</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  









  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
